# DAL脚本部分语句说明

本文为DateALive：凛绪轮回中Script文件里的常用语句介绍及示例。
总结了Script文件里的部分常用语句，以供诸君修改游戏时参考。
所用的游戏为steam上的PC版凛绪轮回。
本文内容皆通过测试而得，不一定完全准确，还请以实际情况为准。


注意事项：
1、文中会用α指代任意文本，β指代任意数字。
2、文中时间单位为帧，每秒为30帧。

本文为早期未整理版本，后续会整理并更新之。

部分语句效果见B站视频：[BV1NU4y1S7Vx](https://www.bilibili.com/video/BV1NU4y1S7Vx)

---

`MesTitle(α)`
显示对话框标题。
α为对话框标题编号。（注：此处调用的是图像文件）
`MesTitle(CHAR_NONE)`为无标题。

`Mes(β1,β2,"α",β3)`
显示文本。
β1、β2为文本横纵坐标，β3为该段落内文本序号，α为文本内容。
常用的坐标有(80,423)和(0,188)。

`MesWait()`
文本等待。
游戏里按L键后继续。

`MesDel()`
显示空文本框。

`MesWinClose()`
对话框关闭。

`EnableMonologue(0)`
进入独白模式。
`EnableMonologue(1)`
退出独白模式。
独白模式是一种文本显示形式，特征是背景变暗及对话框隐藏，用于士道及凛祢的内心独白、士道的梦等情景。

`SetFontSize(β)`
设置字符大小。
β为字符的字号。
常用的字号为：大字52，小字36。
注音：在文本中输入`[α1*α2]`，则显示为在α1的上方显示注音小字α2。

`Wait(β)`
等待。
β为等待的时间。
常用于开始执行一个动作后等待一段时间，等其执行完成后再执行下一个动作。

`SePlay(β1,β2,α)`
播放音效。
β1为音效编号。
α为true则该音效重复播放，α为false则该音效播完后停止。

`SeStop(β1,β2)`
音效播放停止。
β1为音效编号。

`SeAllStop()`
所有音效播放停止。

`BgmWait(β1,β2)`
播放背景音乐。
β1为背景音乐编号。
β1为255时，背景音乐停止。
β2为淡入淡出时间。

`PlayVoice(β1,β2,"α")`
播放配音。
β1可取1或255，为1时则与立绘关联（即对应立绘有嘴部动作），为255时则不与立绘关联。
β2为序号。（序号与立绘序号对应，与配音播放时角色嘴部动作有关）
α为配音文件编号。

`BgOpen(β1,β2)`
显示背景。
β1为背景编号。
CG显示也是这个语句。
背景编号为文件名里BG后面的那串数字，同理立绘编号为MP后的数字，CG编号为MA后的数字。语句中立绘和CG的编号一般会用16进制。
`BgOpen(β1,β2)`语句中，若需打开背景，则β1为背景编号即可；若需打开CG，则β1为一个七位十六进制数，其中前两位为10，后五位为CG编号。（十六进制，若不足五位则需补0。）
比如视频中某张CG编号为150100，转16进制后为24A54，打开的语句则为`BgOpen(0x1024A54, 0x3000000)`

`GalleryFlg(β1, β2)`
CG图鉴解锁。
此处数字如无特殊说明，默认为十六进制。
BgOpen语句中的第一个数字为七位数，即10加上五位数的CG编号。
β1为该七位数中的后四位，β2为该七位数的前三位。
受变量长度限制β1大于8000时要在前面加FFFF。
如：
CG编号为0x28871，则其对应语句为GalleryFlg(0xFFFF8871, 258)。

`BgMove(β1,β2,β3)`
背景移动？

`BustOpen(β1,β2,β3,β4,β5)`
显示立绘。
β1为立绘序号。
β2为所显示的立绘编号。（不同人物、服饰、表情有单独的动态立绘）
β3为立绘横坐标编号。（0为左，1为中，2为右）
β4为动作持续时间。
β5为立绘所属游戏作品。
立绘编号有六位数，其中前两位为角色编号，中间两位为服饰编号，后两位为动作表情编号。
立绘文件共有凛祢理想乡382项，或守植入849项，凛绪轮回的立绘文件放在或守植入的文件夹里。部分立绘动作表情一致，仅有服饰不同。（如MP010101与MP010201等。）
凛祢理想乡与或守植入有部分内容不同但编号相同的立绘，使用时请指定用的是哪一代的立绘文件。（如MP0101??在一代和二代中分别对应十香的夏季和冬季校服。）
β5为1，则显示的为凛祢理想乡的立绘（路径为DATE A LIVE Rio Reincarnation\Data\Data\Mp\1st）；β5为2，则显示的为或守植入的立绘（路径为DATE A LIVE Rio Reincarnation\Data\Data\Mp\2nd）。
因为部分立绘编号重复，所以使用时需要指定所属章节。（可能是因为制作组做或守植入时没想到后面还会有三合一的企划，就没管立绘编号的问题。）
如果指定的文件夹里没有对应编号的立绘文件，游戏就会没有任何提示闪退，还请注意。

`BustAnime(β1,β2)`
播放立绘动作。
β1为所操作的立绘的序号。

`BustClose(β1,β2)`
关闭立绘。
β1为所操作立绘的序号。
β2为动作持续时间。

`BustPriority(β1,β2)`
设置立绘图层顺序。
β1为所操作立绘的序号。

`BustQuake(β1,β2,β3)`
立绘震动。
β1为所操作立绘的序号。
β2为震动幅度。
β3为动作持续时间。

`BustMoveAdd(β1,β2,β3,β4,β5)`
立绘移动。
β1为所操作立绘的序号。
β2为横向位移（左负右正），β3为纵向位移（上负下正）。
β4为动作持续时间。

`MaAnime(β)`
播放CG动画。
β为CG动画序号。
常用于动态CG。

`PatternCrossFade(β1,β2)`
播放转场动画。
β1为转场样式编号，

`SetChoice(α1,"α2",β)`
显示选项。
α1为选项所跳转至的标签编号。
α2为选项文本。
β为选项序号。

`Goto(α)`
标签跳转。
α为所跳转至的标签编号。

`FileJump("α")`
文件跳转。
α为所跳转至的文件编号。

`MemoryOn(β)`
回忆解锁。
β为所解锁的回忆编号。

`PlayMovie("α",β1,β2)`
播放视频。
α为视频名称。
β1为256时，视频不可跳过。β1为257时，视频可跳过。

`Exit()`
退出。即返回标题界面。